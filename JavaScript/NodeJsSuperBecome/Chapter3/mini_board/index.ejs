<!DOCTYPE html>
<html lang="ja">

<head>
  <meta charset="UTF-8">
  <meta http-equiv="content-type" content="text/html">
  <title>ミニ掲示板</title>
  <link rel="stylesheet" href="./style.css">
  <script>
    const init = () => {
      const id = localStorage.getItem("id");
      if (id === null) {
        location.href = "./login";
      }
      document.querySelector("#id").textContent = "ID:" + id;
      document.querySelector("#id_input").value = id;
    };
  </script>
</head>

<body onload="init();">
  <header>
    <h1>掲示板</h1>
  </header>
  <div role="main">
    <p>※メッセージは最大10個まで保管されます。</p>
    <form action="/" method="post">
      <p>
        <span id="id"></span>
        <input type="hidden" name="id" id="id_input" value="">
      </p>
      <p>
        <input type="text" name="msg">
        <input type="submit" value="送信">
      </p>
    </form>
    <hr>
    <p>
      <table style="width: 85%;">
        <% for (const value of data) { %>
        <%- include("data_item", {val:value}) %>
        <% } %>
      </table>
    </p>
  </div>
</body>

</html>